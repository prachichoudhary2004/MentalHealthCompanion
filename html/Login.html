<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SoulZen â€¢ Login / Sign Up</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../style.css" rel="stylesheet" />
  <link rel="apple-touch-icon" sizes="180x180" href="../Favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../Favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../Favicon/favicon-16x16.png">
</head>
<body>
  <div class="navbar navbar-expand-lg bg-dark navbar-dark nav-sticky" id="navbar">
    <div class="container-fluid">
      <div id="logo">
        <a href="../frontend/index.html"><img src="../images file/pic.jpg" alt="logo"></a>
      </div>
      <a href="../frontend/index.html" class="navbar-brand">S<span>oul</span>Z<span>en</span></a>
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
        <div class="navbar-nav ml-auto" id="mynav">
          <a href="../frontend/index.html#hero" class="nav-item nav-link">Home</a>
          <a href="../frontend/index.html#about" class="nav-item nav-link">About</a>
          <a href="../frontend/index.html#feature" class="nav-item nav-link">Features</a>
          <a href="../frontend/index.html#yoga" class="nav-item nav-link">Yoga Poses</a>
          <a href="./games.html" class="nav-item nav-link">Relaxing Games</a>
          <a href="./therapists.html" class="nav-item nav-link">Therapist Finder</a>
          <a href="./articles.html" class="nav-item nav-link">Articles</a>
          <a href="#" class="nav-item nav-link active">Login</a>
        </div>
      </div>
    </div>
  </div>

  <style>
    body{background:linear-gradient(135deg,#e8f6ef,#f3fff6);} .auth-card{max-width:720px;margin:100px auto;border:0;border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,.08);} 
    .auth-header{display:flex;gap:8px;}
    .nav-pills .nav-link{border-radius:12px;color:#006622}
    .nav-pills .nav-link.active{background:#006622;color:#fff}
    .form-control{border-radius:10px}
    .btn-primary{background:#006622;border-color:#006622;border-radius:10px}
    .btn-success{background:#2f7d32;border-color:#2f7d32;border-radius:10px}
  </style>
  <div class="card auth-card p-4">
    <div class="auth-header mb-3">
      <ul class="nav nav-pills" id="authTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link active" id="tab-signin" data-toggle="pill" href="#pane-signin" role="tab">Sign In</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="tab-signup" data-toggle="pill" href="#pane-signup" role="tab">Sign Up</a>
        </li>
      </ul>
    </div>
    <div class="tab-content" id="authContent">
      <div class="tab-pane fade show active" id="pane-signin" role="tabpanel">
        <form id="signin-form">
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" name="email" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password" required />
          </div>
          <button class="btn btn-primary btn-block" type="submit">Sign In</button>
        </form>
        <div class="mt-2 text-danger" id="signin-error" style="display:none;"></div>
      </div>
      <div class="tab-pane fade" id="pane-signup" role="tabpanel">
        <form id="signup-form">
          <div class="form-group">
            <label>Name</label>
            <input type="text" class="form-control" name="name" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" name="email" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password" minlength="6" required />
          </div>
          <button class="btn btn-success btn-block" type="submit">Sign Up</button>
        </form>
        <div class="mt-2 text-danger" id="signup-error" style="display:none;"></div>
      </div>
    </div>
  </div>

  <script src="../scripts/api.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script>
    (function(){
      const signin = document.getElementById('signin-form');
      const signup = document.getElementById('signup-form');
      const signinErr = document.getElementById('signin-error');
      const signupErr = document.getElementById('signup-error');

      if(signin){
        signin.addEventListener('submit', async function(e){
          e.preventDefault();
          signinErr.style.display='none';
          const email = this.email.value.trim();
          const password = this.password.value;
          try{
            const res = await window.api.request('/api/auth/login', { method:'POST', body:{ email, password } });
            localStorage.setItem('token', res.token);
            window.location.href = '../frontend/index.html';
          }catch(err){
            signinErr.textContent = err.message || 'Login failed';
            signinErr.style.display = 'block';
          }
        });
      }

      if(signup){
        signup.addEventListener('submit', async function(e){
          e.preventDefault();
          signupErr.style.display='none';
          const name = this.name.value.trim();
          const email = this.email.value.trim();
          const password = this.password.value;
          try{
            const res = await window.api.request('/api/auth/register', { method:'POST', body:{ name, email, password } });
            localStorage.setItem('token', res.token);
            window.location.href = '../frontend/index.html';
          }catch(err){
            signupErr.textContent = err.message || 'Registration failed';
            signupErr.style.display = 'block';
          }
        });
      }
    })();
  </script>
</body>
</html>
